"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[9663],{852:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module-1-ros2/launch-files","title":"Launch Files and Parameter Management","description":"Python launch file syntax, Launching multiple nodes, Parameters (declaration and usage), YAML parameter files, Remapping topics, Conditional launching.","source":"@site/docs/module-1-ros2/launch-files.mdx","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/launch-files","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module-1-ros2/launch-files","draft":false,"unlisted":false,"editUrl":"https://github.com/Darakhshan08/Physical-AI-Humanoid-Robotics-Textbook/tree/main/docs/module-1-ros2/launch-files.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"launch-files","title":"Launch Files and Parameter Management","sidebar_label":"Launch Files & Parameters","sidebar_position":5,"description":"Python launch file syntax, Launching multiple nodes, Parameters (declaration and usage), YAML parameter files, Remapping topics, Conditional launching.","keywords":["ros2","launch-files","python","parameters","yaml","remapping"]},"sidebar":"tutorialSidebar","previous":{"title":"URDF for Humanoids","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module-1-ros2/urdf-humanoids"},"next":{"title":"Bridging Agents","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module-1-ros2/bridging-agents"}}');var i=a(4848),o=a(8453);const t={id:"launch-files",title:"Launch Files and Parameter Management",sidebar_label:"Launch Files & Parameters",sidebar_position:5,description:"Python launch file syntax, Launching multiple nodes, Parameters (declaration and usage), YAML parameter files, Remapping topics, Conditional launching.",keywords:["ros2","launch-files","python","parameters","yaml","remapping"]},s="Launch Files and Parameter Management",l={},c=[{value:"Python Launch File Syntax",id:"python-launch-file-syntax",level:2},{value:"Example: Simple Launch File",id:"example-simple-launch-file",level:3},{value:"Launching Multiple Nodes",id:"launching-multiple-nodes",level:2},{value:"Parameters: Declaration and Usage",id:"parameters-declaration-and-usage",level:2},{value:"Declaring Parameters in a Node",id:"declaring-parameters-in-a-node",level:3},{value:"YAML Parameter Files",id:"yaml-parameter-files",level:2},{value:"Loading YAML Parameters in a Launch File",id:"loading-yaml-parameters-in-a-launch-file",level:3},{value:"Remapping Topics",id:"remapping-topics",level:2},{value:"Conditional Launching",id:"conditional-launching",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"launch-files-and-parameter-management",children:"Launch Files and Parameter Management"})}),"\n",(0,i.jsxs)(n.p,{children:["As ROS 2 applications grow in complexity, managing multiple nodes, their configurations, and interconnections becomes challenging. ",(0,i.jsx)(n.strong,{children:"Launch files"})," provide a structured way to start and manage entire robot systems. Coupled with ",(0,i.jsx)(n.strong,{children:"parameter management"}),", they offer powerful tools for configuring and customizing your robotic applications."]}),"\n",(0,i.jsx)(n.h2,{id:"python-launch-file-syntax",children:"Python Launch File Syntax"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 launch files are written in Python. This allows for powerful programmatic control over the launch process, including conditional logic, loops, and integration with other Python modules."}),"\n",(0,i.jsx)(n.p,{children:"A typical launch file involves:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Importing necessary modules (e.g., ",(0,i.jsx)(n.code,{children:"LaunchDescription"}),", ",(0,i.jsx)(n.code,{children:"Node"}),", ",(0,i.jsx)(n.code,{children:"ExecuteProcess"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Defining a ",(0,i.jsx)(n.code,{children:"generate_launch_description()"})," function."]}),"\n",(0,i.jsxs)(n.li,{children:["Instantiating ",(0,i.jsx)(n.code,{children:"Node"})," objects for your ROS 2 executables."]}),"\n",(0,i.jsxs)(n.li,{children:["Adding ",(0,i.jsx)(n.code,{children:"Node"})," instances and other launch actions to a ",(0,i.jsx)(n.code,{children:"LaunchDescription"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-simple-launch-file",children:"Example: Simple Launch File"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"my_python_package/launch/my_robot_launch.py"})})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_python_package',\r\n            executable='simple_publisher',\r\n            name='my_publisher',\r\n            output='screen',\r\n            emulate_tty=True,\r\n        ),\r\n        Node(\r\n            package='my_python_package',\r\n            executable='simple_subscriber',\r\n            name='my_subscriber',\r\n            output='screen',\r\n            emulate_tty=True,\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.p,{children:"To run this launch file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_python_package my_robot_launch.py\n"})}),"\n",(0,i.jsx)(n.h2,{id:"launching-multiple-nodes",children:"Launching Multiple Nodes"}),"\n",(0,i.jsxs)(n.p,{children:["Launch files are particularly useful for orchestrating multiple nodes that constitute a robotic system. You simply add more ",(0,i.jsx)(n.code,{children:"Node"})," objects to your ",(0,i.jsx)(n.code,{children:"LaunchDescription"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_python_package',\r\n            executable='sensor_node',\r\n            name='robot_sensor',\r\n            output='screen',\r\n        ),\r\n        Node(\r\n            package='my_python_package',\r\n            executable='motor_controller',\r\n            name='robot_motors',\r\n            output='screen',\r\n        ),\r\n        Node(\r\n            package='my_python_package',\r\n            executable='navigation_planner',\r\n            name='planner',\r\n            output='screen',\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"parameters-declaration-and-usage",children:"Parameters: Declaration and Usage"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"})," allow you to configure nodes at runtime without recompiling code. Nodes declare parameters, and these parameters can be set via launch files, YAML files, or the command line."]}),"\n",(0,i.jsx)(n.h3,{id:"declaring-parameters-in-a-node",children:"Declaring Parameters in a Node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass ConfigurableNode(Node):\r\n    def __init__(self):\r\n        super().__init__('configurable_node')\r\n        self.declare_parameter('my_parameter', 'default_value')\r\n        self.declare_parameter('int_param', 10)\r\n        \r\n        self.param_value = self.get_parameter('my_parameter').get_parameter_value().string_value\r\n        self.int_value = self.get_parameter('int_param').get_parameter_value().integer_value\r\n        \r\n        self.get_logger().info(f'my_parameter: {self.param_value}')\r\n        self.get_logger().info(f'int_param: {self.int_value}')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    configurable_node = ConfigurableNode()\r\n    rclpy.spin(configurable_node)\r\n    configurable_node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"yaml-parameter-files",children:"YAML Parameter Files"}),"\n",(0,i.jsx)(n.p,{children:"For complex configurations, parameters can be stored in YAML files and loaded by the launch system."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"my_python_package/config/params.yaml"})})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'configurable_node:\r\n  ros__parameters:\r\n    my_parameter: "configured_from_yaml"\r\n    int_param: 100\r\n    new_param: 20.5\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loading-yaml-parameters-in-a-launch-file",children:"Loading YAML Parameters in a Launch File"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    package_share_directory = get_package_share_directory('my_python_package')\r\n    parameter_file = os.path.join(package_share_directory, 'config', 'params.yaml')\r\n\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_python_package',\r\n            executable='configurable_node',\r\n            name='my_configurable_node',\r\n            output='screen',\r\n            parameters=[parameter_file]\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"remapping-topics",children:"Remapping Topics"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Remapping"})," allows you to change the name of a topic, service, or action that a node uses without modifying the node's source code. This is very useful for integrating nodes that expect different naming conventions or for running multiple instances of the same node without communication conflicts."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_python_package',\r\n            executable='simple_subscriber',\r\n            name='my_subscriber_remapped',\r\n            output='screen',\r\n            remappings=[\r\n                ('my_topic', '/remapped_topic_name') # Remap 'my_topic' to '/remapped_topic_name'\r\n            ]\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"conditional-launching",children:"Conditional Launching"}),"\n",(0,i.jsx)(n.p,{children:"Python launch files can incorporate conditional logic to start or stop nodes based on external factors or arguments."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration, TextSubstitution\r\nfrom launch.conditions import IfCondition\r\n\r\ndef generate_launch_description():\r\n    # Declare a launch argument\r\n    use_debug_arg = DeclareLaunchArgument(\r\n        'use_debug',\r\n        default_value=TextSubstitution(text='false'),\r\n        description='Enable debug node'\r\n    )\r\n\r\n    # Conditionally launch a node\r\n    debug_node = Node(\r\n        package='my_python_package',\r\n        executable='debug_logger',\r\n        name='debug_node',\r\n        condition=IfCondition(LaunchConfiguration('use_debug')), # Launch only if use_debug is true\r\n        output='screen',\r\n    )\r\n\r\n    return LaunchDescription([\r\n        use_debug_arg,\r\n        debug_node,\r\n        # Other nodes always launched\r\n        Node(\r\n            package='my_python_package',\r\n            executable='main_application',\r\n            name='main_app_node',\r\n            output='screen',\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can then launch with ",(0,i.jsx)(n.code,{children:"ros2 launch my_python_package conditional_launch.py use_debug:=true"})," to enable the debug node."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>s});var r=a(6540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);